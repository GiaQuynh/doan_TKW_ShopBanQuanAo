!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function n(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,r,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(o=n.next()).done)&&(i.push(o.value),!t||i.length!==t);a=!0);}catch(e){l=!0,r=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw r}}return i}}(e,n)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?t(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?r(Object(o),!0).forEach((function(n){e(t,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var a,l=function(){function t(){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e(this,"setData",(function(){var e,t,n,r;if(o.isApp=!!window.NavigatorWebInterface||!(null===(e=window.webkit)||void 0===e||null===(t=e.messageHandlers)||void 0===t||!t.masterData)||!(null===(n=window.webkit)||void 0===n||null===(r=n.messageHandlers)||void 0===r||!r.initNativeApplePayPurchaseWithData),o.isBot=/baiduspider|facebookexternalhit|twitterbot|rogerbot|linkedinbot|embedly|quora|link|preview|showyoubot|outbrain|pinterest|slackbot|vkShare|W3C_Validator|applebot|sogou|DuckDuckBot|Yahoo|BingPreview|adidxbot|bingbot|AdsBot-Google|Googlebot|mangoprerender/i.test(window.navigator.userAgent),window.dataLayerV2Json){var a;o.loadDataLayerV2JsonData();return window.addEventListener("load",(function e(){o.saveLocalStorage(),window.removeEventListener("load",e)})),void(null!==(a=window.verne)&&void 0!==a&&a.mdm&&(window.verne.mdm=i(i({},window.verne.mdm),o)))}if(!o.isApp){var l=JSON.parse(function(e){try{return localStorage.getItem(e)}catch(e){throw new Error("localStorage error")}}("mdm"));l&&o.loadLocalStorageData(l)}})),e(this,"loadLocalStorageData",(function(e){Object.entries(e).forEach((function(e){var t=n(e,2),r=t[0],i=t[1];o[r]=i})),window.dataLayer=window.dataLayer||[],window.dataLayer.push({server:{application:e.application,environment:e.environment},shop:{countryID:e.countryID,countryISO:e.countryISO,isApp:e.isApp,isVOTF:e.isVOTF,languageID:e.languageID,languageISO:e.languageISO,locale:"".concat(e.languageISO,"_").concat(e.countryISO),device:e.platform,access:e.access},user:{externalID:e.externalID,firstName:e.firstName,logged:e.logged,loyalty:e.loyalty,mail:e.mail,emailSha256:e.emailSha256},page:{brand:e.brand,brandID:e.brandID,listType:e.listType,pageType:e.pageType}})})),this.setData()}var r,a,l;return r=t,(a=[{key:"loadDataLayerV2JsonData",value:function(){var e,t,n,o,r,i,a,l,u,s,d,c,v,p,y,f,g,h,b,m,w,O,S,D,I,j,P,k=window,T=k.dataLayerV2Json,A=k.viewObjectsJson,L=k.shopJson;this.access=null==T||null===(e=T.shop)||void 0===e?void 0:e.access,this.application=null==T||null===(t=T.server)||void 0===t?void 0:t.application,this.brand=null==T||null===(n=T.page)||void 0===n?void 0:n.brand,this.brandID=null==T||null===(o=T.page)||void 0===o?void 0:o.brandID,this.countryID=null==T||null===(r=T.shop)||void 0===r?void 0:r.countryID,this.countryISO=null==T||null===(i=T.shop)||void 0===i?void 0:i.countryISO,this.environment=null==T||null===(a=T.server)||void 0===a?void 0:a.environment,this.externalID=null==T||null===(l=T.user)||void 0===l?void 0:l.externalID,this.firstName=null==T||null===(u=T.user)||void 0===u?void 0:u.firstName,this.idSection=null==A||null===(s=A.catalogParameters)||void 0===s?void 0:s.idSection,this.idSubSection=null==A||null===(d=A.catalogParameters)||void 0===d||null===(c=d.optionalParams)||void 0===c?void 0:c.idSubSection,this.isMng=null==L||null===(v=L.country)||void 0===v?void 0:v.isMng,this.isoCode=null==A||null===(p=A.headerMenusParams)||void 0===p?void 0:p.isoCode,this.isVOTF=null==T||null===(y=T.shop)||void 0===y?void 0:y.isVOTF,this.languageID=null==T||null===(f=T.shop)||void 0===f?void 0:f.languageID,this.languageISO=null==T||null===(g=T.shop)||void 0===g?void 0:g.languageISO,this.listType=null==T||null===(h=T.page)||void 0===h?void 0:h.listType,this.locale="".concat(this.languageISO,"-").concat(this.countryISO),this.logged=null==T||null===(b=T.user)||void 0===b?void 0:b.logged,this.loyalty=null==T||null===(m=T.user)||void 0===m?void 0:m.loyalty,this.mail=null==T||null===(w=T.user)||void 0===w?void 0:w.mail,this.emailSha256=null==T||null===(O=T.user)||void 0===O?void 0:O.emailSha256,this.mangoCountryISO=null==A||null===(S=A.headerMenusParams)||void 0===S?void 0:S.isoCode,this.pageNameNoSuffix=null==L?void 0:L.pageNameNoSuffix,this.pageType=null==T||null===(D=T.page)||void 0===D?void 0:D.pageType,this.platform=null==T||null===(I=T.shop)||void 0===I?void 0:I.device,this.selectedMenu=null==A||null===(j=A.headerMenusParams)||void 0===j||null===(P=j.optionalParams)||void 0===P?void 0:P.selectedMenu}},{key:"saveLocalStorage",value:function(){!function(e,t){try{localStorage.setItem(e,t)}catch(e){throw new Error("Error set")}}("mdm",JSON.stringify(this))}}])&&o(r.prototype,a),l&&o(r,l),Object.defineProperty(r,"prototype",{writable:!1}),t}(),u=new l;function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function d(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?s(Object(o),!0).forEach((function(n){e(t,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):s(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}window.verne=d(d({},window.verne),{},{mdm:d(d({},null===(a=window.verne)||void 0===a?void 0:a.mdm),u)})}));
